(function(s,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],n):(s=typeof globalThis<"u"?globalThis:s||self,n(s.storyblokResolveRelationsDeep={},s.React))})(this,function(s,n){"use strict";var _=Object.defineProperty,a=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,y=(e,o,t)=>o in e?_(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,P=(e,o)=>{for(var t in o||(o={}))c.call(o,t)&&y(e,t,o[t]);if(a)for(var t of a(o))u.call(o,t)&&y(e,t,o[t]);return e},g=(e,o)=>{var t={};for(var r in e)c.call(e,r)&&o.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&a)for(var r of a(e))o.indexOf(r)<0&&u.call(e,r)&&(t[r]=e[r]);return t};const h=n.forwardRef((e,o)=>{var t=e,{blok:r}=t,p=g(t,["blok"]);if(!r)return console.error("Please provide a 'blok' property to the StoryblokComponent"),n.createElement("div",null,"Please provide a blok property to the StoryblokComponent");const i=w(r.component);return i?n.createElement(i,P({ref:o,blok:r},p)):n.createElement("div",null)});h.displayName="StoryblokComponent";let O=null;const k=()=>(console.error("You can't use getStoryblokApi if you're not loading apiPlugin."),O);let m={};const w=e=>m[e]?m[e]:(console.error(`Component ${e} doesn't exist.`),!1),b=async(e,o,t)=>{for(const r of o){const[p,i]=r.split("."),S=d(p,e);for(const f of S){const l=f[i];Array.isArray(l)?f[i]=await Promise.all(l.map(async j=>await v(j))):typeof l=="string"?f[i]=await v(l):typeof l=="object"&&b(l,o)}}return e},d=(e,o)=>{const t=[];return o=o??{},o.component===e&&t.push(o),Object.values(o).forEach(r=>{typeof r=="object"&&t.push(...d(e,r))}),t},v=async(e,o)=>{const t=k(),{data:r}=await t.get("cdn/stories",{...o,by_uuids:e});return r.stories.length>0?r.stories[0]:e};s.resolveRelationsDeep=b,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
